!function(){angular.module("SlideTilePuzzle",[])}(),function(){var app=angular.module("SlideTilePuzzle");app.factory("PuzzleMethods",function(){return{getData:function(size){for(var sum=0,array=[],row=0;row<size;row++)for(var col=0;col<size;col++)array[row]=array[row]||[],array[row][col]={index:sum,row:row,col:col},sum++;return array[size-1][size-1].active=!0,array},getValidSolution:function(size){for(var total=Math.pow(size,2),puzzle=[],white=total-1,backup=0,i=0;i<total;i++)puzzle[i]=i;return puzzle.sort(function(){return 1-2*Math.round(Math.random())}),puzzle.splice(puzzle.indexOf(white),1),puzzle.push(white),this.isValidPuzzle(puzzle,size)||(backup=puzzle[0],puzzle[0]=puzzle[1],puzzle[1]=backup),puzzle},isValidPuzzle:function(array,size){for(var total=array.length,white=total-1,inv=0,i=0;i<total;i++)if(array[i]!==white)for(var j=i+1;j<total;j++)array[j]!==white&&array[j]<array[i]&&inv++;return Boolean(inv%2===0)},shufflePuzzle:function(array){for(var size=array.length,puzzle=this.getValidSolution(size),index=0,row=0;row<size;row++)for(var col=0;col<size;col++)index=puzzle.indexOf(array[row][col].index),array[row][col].row=Math.floor(index/size),array[row][col].col=index-array[row][col].row*size},isMovable:function(item,array){var box=array[array.length-1][array.length-1];return(item.row===box.row||item.col===box.col)&&(item.row===box.row&&1===Math.abs(item.col-box.col)||item.col===box.col&&1===Math.abs(item.row-box.row))},swapBoxes:function(array,item){var box=array[array.length-1][array.length-1],boxRow=box.row,boxCol=box.col;box.row=item.row,box.col=item.col,item.row=boxRow,item.col=boxCol},checkPuzzle:function(array){for(var size=array.length,solution=!0,row=0;row<size;row++){for(var col=0;col<size;col++)if(array[row][col].row!==row||array[row][col].col!==col){solution=!1;break}if(!solution)break}return solution}}})}(),function(){var app=angular.module("SlideTilePuzzle");app.controller("PuzzleController",["$scope","PuzzleMethods",function($scope,PuzzleMethods){function updateTime(){var difTime=(new Date-start)/1e3,seconds=Math.round(difTime%60).toString(),minutes=Math.floor(difTime/60).toString(),hours=Math.floor(difTime/3600).toString();$scope.time=hours,$scope.time+=":",$scope.time+="00".slice(0,2-minutes.length)+minutes,$scope.time+=":",$scope.time+="00".slice(0,2-seconds.length)+seconds,$scope.$apply()}var tick,tiles=4,start=null;$scope.data=PuzzleMethods.getData(tiles,!0),$scope.movements=0,$scope.time="0:00:00",$scope.solved=!0,$scope.movePiece=function(item){PuzzleMethods.isMovable(item,$scope.data)&&($scope.movements++,PuzzleMethods.swapBoxes($scope.data,item),PuzzleMethods.checkPuzzle($scope.data)&&($scope.solved=!0,isNaN(tick)||clearInterval(tick)))},$scope.resetPuzzle=function($event){$event.preventDefault(),PuzzleMethods.shufflePuzzle($scope.data),$scope.movements=0,$scope.time="0:00:00",$scope.solved=!1,start=new Date,tick=setInterval(updateTime,1e3)}}])}();